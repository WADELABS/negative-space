# Void Report JSON Schema

## Overview
All void reports generated by `VoidAgent.map_voids()` follow a consistent JSON structure. This enables integration with external tools, CI/CD pipelines, and data analysis platforms.

## Schema Version: 1.0

### Root Report Object
```json
{
  "schema_version": "1.0",
  "timestamp": "ISO-8601 datetime",
  "void_map_id": "string",
  "summary": { ... },
  "critical_findings": [ ... ],
  "gaps": [ ... ],
  "navigation_plan": { ... },
  "clusters": [ ... ],
  "patterns": { ... },
  "recommendations": [ ... ]
}
```

### Complete Schema
```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NegativeSpaceVoidReport",
  "type": "object",
  "required": ["summary"],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "void_map_id": {
      "type": "string"
    },
    "summary": {
      "type": "object",
      "properties": {
        "total_gaps": { "type": "integer" },
        "void_density": { "type": "number", "minimum": 0, "maximum": 1 },
        "navigability": { "type": "number", "minimum": 0, "maximum": 1 },
        "connectivity": { "type": "number", "minimum": 0, "maximum": 1 },
        "blocking_gaps": { "type": "integer" },
        "fillable_gaps": { "type": "integer" }
      }
    },
    "critical_findings": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "gap_id": { "type": "string" },
          "description": { "type": "string" },
          "void_type": { 
            "type": "string", 
            "enum": [
              "DEPENDENCY_GAP", 
              "INFORMATION_GAP", 
              "CONSTRAINT_GAP", 
              "CAPABILITY_GAP", 
              "CONCEPTUAL_GAP", 
              "CAUSAL_GAP", 
              "TEMPORAL_GAP", 
              "ETHICAL_GAP"
            ] 
          },
          "criticality": { 
            "type": "string", 
            "enum": ["BLOCKING", "HIGH", "MEDIUM", "LOW", "UNKNOWN"] 
          },
          "certainty": { 
            "type": "string", 
            "enum": ["DEFINITE", "HYPOTHESIZED", "SPECULATIVE", "EMERGENT"] 
          }
        }
      }
    },
    "gaps": {
      "type": "array",
      "items": { "$ref": "#/definitions/Gap" }
    },
    "navigation_plan": {
      "type": "object",
      "properties": {
        "strategy": { "type": "string" },
        "path": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "gap_id": { "type": "string" },
              "description": { "type": "string" },
              "action": { "type": "string" },
              "estimated_cost": { "type": "number" },
              "estimated_time": { "type": "number" }
            }
          }
        },
        "total_cost": { "type": "number" },
        "total_time": { "type": "number" }
      }
    },
    "clusters": {
      "type": "array",
      "items": { "$ref": "#/definitions/GapCluster" }
    },
    "patterns": {
      "type": "object",
      "properties": {
        "void_density": { "type": "number" },
        "gap_distribution": { "type": "object" },
        "criticality_distribution": { "type": "object" },
        "fillability_rate": { "type": "number" }
      }
    },
    "recommendations": {
      "type": "array",
      "items": { "type": "string" }
    }
  },
  "definitions": {
    "Gap": {
      "type": "object",
      "required": ["id", "description", "void_type", "criticality", "certainty"],
      "properties": {
        "id": { "type": "string" },
        "description": { "type": "string" },
        "void_type": { "type": "string" },
        "domains": { "type": "array", "items": { "type": "string" } },
        "evidence": { "type": "array" },
        "manifestations": { "type": "array", "items": { "type": "string" } },
        "criticality": { "type": "string" },
        "certainty": { "type": "string" },
        "size": { "type": "number" },
        "clarity": { "type": "number" },
        "fillable": { "type": "boolean" },
        "fill_cost": { "type": "number" },
        "fill_time": { "type": "number" }
      }
    },
    "GapCluster": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "gaps": { "type": "array", "items": { "$ref": "#/definitions/Gap" } },
        "density": { "type": "number" },
        "strategic_importance": { "type": "number" }
      }
    }
  }
}
```

## Example Usage

### Python

```python
import json
from negative_space import VoidAgent

agent = VoidAgent()
report = await agent.map_voids(point_a, point_b)

# Save to file
with open('void_report.json', 'w') as f:
    json.dump(report, f, indent=2, default=str)

# Validate structure
assert 'summary' in report
assert report['summary']['void_density'] >= 0.0
```

### CLI Integration

```bash
# Generate report
python -m negative_space --current current.json --goal target.json --output report.json

# Query with jq
jq '.critical_findings[] | select(.criticality=="BLOCKING")' report.json
```

### CI/CD Integration

```yaml
# .github/workflows/void-check.yml
- name: Analyze Architecture Void
  run: |
    python -m negative_space --current current.json --goal target.json --output void.json
    BLOCKING=$(jq '.summary.blocking_gaps' void.json)
    if [ "$BLOCKING" -gt "0" ]; then
      echo "::error::Found $BLOCKING blocking gaps"
      exit 1
    fi
```

## Real-World Example

Here's an actual void report from the monolith-to-microservices demo:

```json
{
  "summary": {
    "void_map_id": "void_map_4e1970178e00426c",
    "total_gaps": 4,
    "void_density": 0.211,
    "navigability": 1.0,
    "connectivity": 1.0
  },
  "critical_findings": [],
  "navigation_plan": {
    "strategy": "gap_hopping",
    "path": [
      {
        "gap_id": "missing_attr_event_bus",
        "description": "Attribute 'event_bus' exists in B but not in A",
        "action": "Fill DEPENDENCY_GAP gap",
        "estimated_cost": 0.0,
        "estimated_time": 0.0
      }
    ],
    "total_estimated_cost": 0.0,
    "total_estimated_time": 0.0
  },
  "patterns": {
    "void_density": 0.211,
    "gap_distribution": {
      "DEPENDENCY_GAP": 4
    },
    "criticality_distribution": {
      "UNKNOWN": 3,
      "MEDIUM": 1
    },
    "fillability_rate": 1.0
  },
  "recommendations": []
}
```

## Versioning

The schema version is included in every report (`schema_version` field). Future versions will maintain backward compatibility where possible. Breaking changes will increment the major version.

**Current Version**: 1.0

## Integration Libraries

While the framework is Python-based, the JSON schema enables integration from any language:

- **Python**: Use the native `negative_space` package
- **JavaScript/TypeScript**: Parse JSON reports using standard libraries
- **Go**: Use `encoding/json` to parse reports
- **Rust**: Use `serde_json` for deserialization

## Schema Validation

To validate a void report against this schema:

```python
import json
import jsonschema

# Load your report
with open('void_report.json') as f:
    report = json.load(f)

# Load schema (if you have it as a separate file)
with open('void_report_schema.json') as f:
    schema = json.load(f)

# Validate
jsonschema.validate(instance=report, schema=schema)
```

## Support

For questions about the schema or integration:
- Open an issue: https://github.com/WADELABS/negative-space/issues
- Documentation: https://github.com/WADELABS/negative-space
